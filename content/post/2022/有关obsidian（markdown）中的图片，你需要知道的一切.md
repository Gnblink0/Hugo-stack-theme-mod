+++
author = "关念"
title = "有关Markdown中的图片，你需要知道的一切"
date = "2022-03-05"
description = "Obsidian使用场景下的Markdown图片设定与操作"
categories = [
    "工具"
]
tags = [
    "生产力",
    "方法论",
    "obsidian"
]
image = "https://s2.loli.net/2022/03/05/cgXDSvRQGK6T1WB.jpg"

+++

我一开始也完全不理解markdown格式下的图片逻辑，花了挺久才搞懂而且逐渐习惯。

现在每次回头看自己磕磕绊绊摸爬滚打的经历和逻辑也都会觉得很蠢hh 自己折腾了很久自以为恍然大悟，其实后来一搜发现图床托管md中的图片早已是被探索得很完善的一种方法了。

但没办法，毕竟路都是人用脚一步一步走出来的， 就算有什么先辈遗产（突然想起饥荒……）也得自己先走起来才能找到。

![我12月份的时候也还是这个状态 笑](https://s2.loli.net/2022/03/03/DiCYbJh74qG9Oxo.png)



## 弱图文排版特质

首先，鱼与熊掌不可兼得。markdown格式的优点在于忽略排版专注内容、大小极小清爽方便；而弱点就是**不擅长图文排版**，因为所有的图片在markdown格式中都是以**链接**的形式存在的，逻辑和网页链接、笔记链接没有区别。

所以在markdown里完全可以插入图片以实现最基本的图片显示功能，但是如果想实现像word或者微信公众号里一样的丰富图文排版……几乎是不可能的，除非打很多插件疯狂折腾，但我觉得应该把合适的使用场景留给合适的工具，没有必要魔改强求，如果你有很高的图文排版要求，markdown并不是适合你的文本格式。



---



关于markdown格式的进一步介绍：

[Markdown 入门基础 | Markdown 官方教程](https://markdown.com.cn/intro.html)

[为什么用Markdown，而不用Word？ - 知乎](https://zhuanlan.zhihu.com/p/86516807)



## 两种储存图片方式

首先介绍一个概念：

`!` （英文感叹号）在markdown中的意思是「渲染」， page、图片、pdf链接都可以通过前加 `!` 直接渲染。

渲染的意思是「可以直接显示内容而不是标题」；如果去掉 `!`，则只会显示标题，鼠标悬停在上面才可以看见内容（即不渲染）。



---



然后，Markdown之中有两种储存图片的方式。
### 本地储存

![本地储存图片的格式与效果](https://s2.loli.net/2022/03/05/j9qiAQfdGWObMDK.png)

图片以png、jpg、gif等图片格式直接存在你的本地硬盘（也就是你的 obsidian vault中）

格式为： `![[图片名称.格式后缀]]` 

当你直接把图片拖入或者粘贴到obsidian，obsidian会自动使用这个方式在本地创建一个图片page，可以修改该界面的名字，但是不能修改后缀和格式，也不能往该界面内加任何其他内容（其实本质上就是ob把图片存到了本地且读取后用page形式呈现了）。

**但是**在markdown中，如果一个图片只是在一个地方用一次，我们通常不会让图片占用本地空间；而且如果你要把markdown里的图片上传到网络（比如把本地文章写好后上传到各大网站），每次都要反复上传非常麻烦。

所以在markdown中管理图片更主流和方便的方式是**外链渲染**。

### 外链渲染

![外链渲染图片的格式与效果](https://s2.loli.net/2022/03/05/swz4xPeSoyp2QBc.png)

像渲染外部网页一样直接渲染外链

格式和渲染网页完全一致，即： `![图片名称 /可以为空](图片链接)`

这样，图片不仅不会占用你的本地储存空间，而且如果你要把markdown里的图片上传到网络，可以直接使用该链接而无需任何额外更改和上传，任何网站都可以成功读取渲染这张图片。

注意，本地图片是没有网络链接的，那么问题就是，当我们的图片是本地图片或不方便得到地址链接的时候，我们怎么用这个方法呢？答案就是：**图床**。

## 图床
### 什么是图床？
图床就是给图片提供一个容身之处。

平时，你的图片栖息在你的手机相册中（也就是你的手机本地储存中），如果你想把图片分享到网络上，就必须要找到一个平台托管你的图片、赋予你一个代表该图的网络链接，然后以这个链接为基础才可以把图片共享到全互联网。

其实你平时用的微博、朋友圈，都在帮你托管着图片，只是这仅仅是它们的一个附带功能，所以你并不会把它们看成是图床。而图床网站就是专门帮你托管图片、提供图片链接的网站。

关于主流图床的选择：[分享8个高速稳定的图床网站 - 简书](https://www.jianshu.com/p/c35091dcba84) [markdown图床 - 简书](https://www.jianshu.com/p/ea1eb11db63f)

我用的是sm.ms，免费完全够用。

### 自动化图床
现在我们有了图床，问题是，如果每次使用图片都需要**手动操作**（复制图片、粘贴图片、打开网站、点击上传、复制链接、粘贴链接）也太麻烦了。

好在计算机工具的最大特点就是让人类可以通过脚本从重复劳动中解放出来。配置完成之后，你只需要手动操作复制图片、按脚本快捷键、粘贴链接**三个动作**就可以了。

为了实现自动化，我们主要需要干的也是三件事：下载脚本、配置API token、设置快捷键。

#### API token

##### 是什么？

简单来说，「API token」是平台开放给你的一个对外接口的认证密码。

拿这个图床情景举例。

>你对平台说：我不愿意手动操作「复制图片、粘贴图片、打开网站、点击上传、复制链接、粘贴链接」这一坨操作了，我现在有一个自动操作脚本可以帮我省点事。但是要想真正使用这个脚本我还需要你的配合和帮忙，我需要「你帮我上传图片」和「获得你反馈的链接」，你能开放接口提供这些服务和数据给我吗？
>
>平台说：当然可以，我愿意开放这个接口给你，但是我要知道使用这个接口的是谁。那这样吧，我给你一个**密码**，你把它填到脚本里运行，我就知道是你，就可以给你提供服务和数据了。

这个密码就是API token。

##### 如何获取

我只清楚sm图床的，其他应该大同小异

1. 去sm图床（ [https://sm.ms ](https://sm.ms/ "https://sm.ms/" ) ）注册一个账号
2. 点右上角的【users- dashboard-API Token】
3. 复制这一串Token  

---

我现在已经完全实现了图床-markdown的自动化操作，在macos上用的是「upic」软件，在ios上用的是我自己折腾出来的「快捷指令」。（win经常用的是「PicGo」，不过我没怎么用过就不在此讲了，可以自行搜索研究）。

#### Upic

去他们的[官网](https://blog.svend.cc/upic/) ，按照指示下载软件、配置好API token、设置好快捷键就可以使用了。

我一般用的最多的是「上传剪贴板图片」（我设置的快捷键：cmd+shift+s）和「截图上传」（我设置的快捷键：cmd+shift+2）。

#### Shortcuts

你可以把shortcuts理解为：由可视化图形组成操作界面、不涉及代码友好易上手、但是运用了编程逻辑的、ios上的脚本app。

1. 去App Store下Shortcuts（捷径/快捷指令）  
2. 点击[此处](https://www.icloud.com/shortcuts/5bde780cdadc4e4b82fc43f1c4c8cec2)，在捷径app里打开下载这个捷径。  
3. 一共有三个地方要输入Token。打开此捷径的编辑界面（右上角三个点），在图中寻找：获取URL内容-头部- Authorization，在Authorization右边的框里粘贴你复制的Token，保存 （一共有三个Authorization所以要操作三次，路径和名字都是一样的但是具体位置不一样）

然后就可以用了！

注意：
1. 这个捷径接受两个图片来源，一是相册，二是直接在分享界面选这个捷径
2. 一开始是为了单词配图做的这个捷径，所以大小统一设置成了200像素宽度以保证整齐，不需要的话可以在「文本」里自行修改。




## 改变图片大小
注意：这并不是markdown通用方法，而是obsidian特有的。

你可以在图片名称里输入`|像素数字`改变图片大小，单独输入的数字默认是「宽度的像素值」。

如，以下例子的意思为：保持宽高比，更改图片宽度为200像素。

- `![[我是图片.jpg|200]]`。
- `![|200](https://s2.loli.net/2022/03/03/DiCYbJh74qG9Oxo.png)`

如果想更改高度或宽高比，则数字格式为：100x100（前宽度；后高度）



## 相关插件推荐

首先，要梯子才可以正常访问obsidian设置里的第三方插件社区，即点开如图所示按钮后的界面。

![](https://s2.loli.net/2022/03/05/LA1QzfOMcP47ZnB.png)

没有梯子可以去github库里直接下载之后拖进obsidian的插件文件夹。虽然尴尬的是github也要梯子...所以这个解释起来没完，我就不进一步解释了。

### Image Toolkit
仓库地址：https://github.com/sissilab/obsidian-image-toolkit

markdown里的图片浏览体验非常简陋，只能放大查看。这个插件提供了一系列查看图片时可以按比例缩放、旋转、全屏、复制图片 等功能（注意：是「查看图片」，这代表图片视角暂时改变，不代表图片本身被编辑了）

![效果](https://raw.githubusercontent.com/sissilab/obsidian-image-toolkit/master/example/view_image.gif)

### Media Extended
上文提到了 `!` 可以渲染page、图片、pdf链接，但是这也就是obsidian自带支持的唯三渲染了，没有想到吧！

好吧，反正这个插件可以拓展可渲染媒体，包括音频、视频等，而且额外提供提供倍速播放等功能。

[效果](https://user-images.githubusercontent.com/31102694/118903678-dd82fe00-b94a-11eb-8ef3-7b5044a2bab8.mp4)